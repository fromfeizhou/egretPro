var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(e){i(e)}}function s(t){try{l(o["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,i=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(o){n=[6,o],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},JzApk3Platform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.isClickLogin=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.userId,PlatConst.platformUsername=e.username,PlatConst.token=e.sign,PlatConst.timestamp=e.timestamp,PlatConst.channelId=512,this.isClickLogin&&this.login())});var t={type:"init"};egret.ExternalInterface.call("sendToNative",JSON.stringify(t))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return""==PlatConst.platformUid?(t={type:"init"},egret.ExternalInterface.call("sendToNative",JSON.stringify(t)),this.isClickLogin=!0,[2]):(this.isClickLogin=!1,PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:PlatConst.token,qyChannelId:"512",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=512,LoginManager.runGame(),[2])})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c;return __generator(this,function(p){return r=o,i="rolename="+PlatConst.nickName+"~roleid="+PlatConst.playerId+"~productId="+e.toString()+"~uid="+PlatConst.platformUid.toString()+"~sid="+PlatConst.zoneId.toString()+"~cp_orderid="+t.toString(),a=0,s=n,l=n,c={role_id:PlatConst.playerId.toString(),palyerName:PlatConst.nickName,serverName:PlatConst.zoneName,roleLevel:PlatConst.level,serverId:PlatConst.zoneId.toString(),cpOderId:t.toString(),ratio:10,callbackinfo:i,goods:l,money:r,shopId:e.toString(),vipLevel:PlatConst.vipLevel.toString(),type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(c)),console.log("---测试onClickbuy:"+JSON.stringify(c)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e={id:t,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),ServerId:PlatConst.zoneId.toString(),ServerName:PlatConst.zoneName,RoleVipLv:PlatConst.vipLevel.toString(),user_id:PlatConst.platformUid.toString(),game_id:"1207",type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(e)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(e))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(JzApk3Platform.prototype,"JzApk3Platform",["Platform"]);var LoginManager=function(){function t(){}return t.setup=function(t,e){var n=this;this.stage=t,this.root=e,ClientConfig.setup(function(){removeLoadingDiv&&removeLoadingDiv(),PlatConst.platform==PlatEnum.DDT_WE_CHAT?n.createWarnImg():n.showLoginScene()},this)},t.createWarnImg=function(){if(PlatConst.platform==PlatEnum.DDT_WE_CHAT){var t=new eui.Group;this.stage.addChildAt(t,9999);var e=new eui.Rect(GameConfig.curWidth(),GameConfig.curHeight(),2236962);t.addChild(e);var n=LoginConst.createImage("loginWarn.jpg");n.verticalCenter=0,n.horizontalCenter=0,t.addChild(n),n.alpha=.5;var o=egret.Tween.get(n);o.to({alpha:1},1e3),setTimeout(function(){this.stage.removeChild(t),this.showLoginScene()}.bind(this),3e3)}},t.startGame=function(){PlatConst.isWxApp()?this.initGame():this.initCode()},t.showConfirmPop=function(t,e,n){this.loginScene&&this.loginScene.showConfirmPop(t,e,n)},t.initCode=function(){this.isCodeInit||this.loadCode()},t.initGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=new AssetAdapter,egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),[4,this.loadResource()];case 1:return e.sent(),console.log("initGame"),AGame.R.startup(this.root),this.root.addEventListener(egret.FocusEvent.FOCUS_OUT,function(){window.scrollTo(0,0)},!0),com_main.UpManager.addPanelInPopLayer(this.loginScene),this.hideLoadinProcess(),this.isCodeInit=!0,PlatConst.isShowNotice()&&this.loginScene.showNoticeWnd(),[2]}})})},t.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),this.setLoadinProcess("初始化资源配置",80),[4,RES.loadConfig(GameConfig.getResourName(),GameConfig.getResRemoteUrl())];case 1:return e.sent(),this.setLoadinProcess("初始化主题配置",90),[4,this.loadTheme()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),console.error(t),[3,4];case 4:return[2]}})})},t.loadTheme=function(){var t=this;return new Promise(function(e,n){var o=GameConfig.getThemeUrl(),r=new eui.Theme(o,t.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},t.runGame=function(){com_main.Bootstrap.startup(),this.loginScene.touchEnabled=!1,this.loginScene.touchChildren=!1},t.wakeupLoginScene=function(){this.loginScene&&(this.loginScene.touchEnabled=!0,this.loginScene.touchChildren=!0)},t.showLoginScene=function(){return this.loginScene?void this.wakeupLoginScene():(this.loginScene=new Mini.LoginScene,void(this.isCodeInit?com_main.UpManager.addPanelInPopLayer(this.loginScene):this.root.addChildAt(this.loginScene,99)))},t.changeServerSel=function(t){this.loginScene&&this.loginScene.changeServerSel(t)},t.setLoadinProcess=function(t,e){this.loginScene&&this.loginScene.setProcess(t,e)},t.hideLoadinProcess=function(){this.loginScene&&this.loginScene.hideProcess()},t.showTips=function(t){this.loginScene&&this.loginScene.showTips(t)},t.loadCode=function(){this.loaded=0;try{throw new Error("zip解压下载失败")}catch(t){this.loadScript()}},t.loadZip=function(e){this.setLoadinProcess("初始化环境1-1",30);var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.addEventListener("load",function(e){if(200!=n.status&&304!=n.status)throw new Error("zip解压下载失败");var o=n.response;if(!o)throw new Error("zip解压异常");t.createScript(new JSZip(o))}),n.send(null)},t.createScript=function(e){this.setLoadinProcess("初始化环境1-2",40);for(var n=0,o=mainfestCfg.game;n<o.length;n++){var r=o[n],i=r.substr(3);if(!e.files[i])throw new Error("zip读取错误 "+i);var a=e.files[i].asText(),s=document.createElement("script");s.setAttribute("type","text/javascript"),s.text=a,document.body.appendChild(s),document.body.removeChild(s)}t.initGame()},t.loadScript=function(){this.setLoadinProcess("初始化环境2-1 "+this.loaded+"/"+mainfestCfg.game.length,50),this.loadNext()},t.loadNext=function(){loadSingleScript($PlatformSrc+mainfestCfg.game[t.loaded],function(){t.loaded++;var e=Math.floor(30*(t.loaded/mainfestCfg.game.length));t.setLoadinProcess("初始化环境2-1 "+t.loaded+"/"+mainfestCfg.game.length,50+e),t.loaded>=mainfestCfg.game.length?t.initGame():t.loadNext()})},t.isCodeInit=!1,t}();__reflect(LoginManager.prototype,"LoginManager");var Mini;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),console.log("==============>>>MiniMain");var e=(new Date).getTime();window.ta.track("launch_main",{launch_time:(e-window.$Htmltimestamp).toString()}),this.initConfig(),LoginManager.setup(this.stage,this)},e.prototype.initConfig=function(){egret.ImageLoader.crossOrigin="anonymous",egret.TextField.default_fontFamily=GameConfig.fontDefault,RES.setMaxLoadingThread(5)},e}(eui.UILayer);t.MiniMain=e,__reflect(e.prototype,"Mini.MiniMain")}(Mini||(Mini={}));var WebAudioDecode=function(){function t(){}return t.decodeAudios=function(){if(!(t.decodeArr.length<=0||t.isDecoding)){t.isDecoding=!0;var e=t.decodeArr.shift();t.ctx.decodeAudioData(e.buffer,function(n){e.self.audioBuffer=n,e.success&&e.success(),t.isDecoding=!1,t.decodeAudios()},function(){e.fail&&e.fail(),t.isDecoding=!1,t.decodeAudios()})}},t}(),ZsyWxPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.m_token="",this.m_sign="",this.d_platform="",this.d_openid="",this.d_time="",this.d_extinfo="",this.d_invited_role_id="",this.d_callback_url="",this.s_gameUID="",this.s_channelUID="",this.count=1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){PlatConst.getUrlGet();window.cmgeH5GameSDK.login(function(t){console.log("login: ",t);var e={gameUID:t.gameUID,channelUID:t.channelUID,cmgePlayerId:t.cmgePlayerId,loginTime:t.loginTime,sign:t.sign,channelUserId:t.channelUserId,platformID:t.platformID,mixChannelUID:t.mixChannelUID,cps:t.cps,channel_id:"508",type:"login_sign"};console.log("cpUserLogin json--: ",JSON.stringify(e)),Mini.HttpClient.get(function(t){"0"==t?(PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"508",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=508):console.log("登录失败："+t.msg)},this,"code=17&jstr="+JSON.stringify(e),"https://h5.373yx.com/sdk/SdkSendData")})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return LoginManager.runGame(),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.loginGame=function(t,e,n,o){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c,p,u,d,m,h,g,f,_,v,C,y,P,S,I;return __generator(this,function(w){return i=(new Date).getTime(),a=PlatConst.zoneId.toString(),s=PlatConst.zoneId.toString(),l=PlatConst.zoneName,c=PlatConst.zoneName,p=PlatConst.nickName,u=PlatConst.nickName,d=PlatConst.playerId.toString(),m=n,h=0,g="roleid="+PlatConst.playerId+"~productId="+e.toString(),f=100*o,_=e,v=3,C=e,y=n,P=PlatConst.level,S=PlatConst.vipLevel,I={gameUID:window.cmgeH5GameSDK.gameUID,channelUID:window.cmgeH5GameSDK.channelUID,cmgePlayerId:window.cmgeH5GameSDK.cmgePlayerId,serverID:a.toString(),oldServerID:s.toString(),serverName:l,oldServerName:c,roleId:d.toString(),roleName:p,oldRoleName:u,subject:m,coinNumber:h.toString(),money:f.toString(),itemID:_.toString(),version:v.toString(),productID:C.toString(),productName:y,roleLevel:P.toString(),roleVipLevel:S.toString(),cpExtend:g,orderNo:t},Mini.HttpClient.get(function(e){r=JSON.parse(e),window.cmgeH5GameSDK.pay({money:f,cmgePlayerId:window.cmgeH5GameSDK.cmgePlayerId,serverID:a,oldServerID:s,serverName:l,oldServerName:c,roleName:p,oldRoleName:u,orderNo:t.toString(),subject:m,coinNumber:h,itemID:_,cpExtend:g,version:v,sign:r.sign,productID:C,productName:y,roleId:d,roleLevel:P,roleVipLevel:S.toString(),payType:1})},this,"code=15&jstr="+JSON.stringify(I),"https://h5.373yx.com/sdk/SdkSendData"),[2]})})},t.prototype.reportRegister=function(){this.zsyReportData("1")},t.prototype.reportLogin=function(){this.zsyReportData("2")},t.prototype.reportData=function(t){"levelUp"==t&&this.zsyReportData("3")},t.prototype.zsyReportData=function(t){var e=(new Date).getTime();({gameType:"武侠",serverId:PlatConst.zoneId.toString(),oldServerID:"1",serverName:PlatConst.zoneName.toString(),oldServerName:"1",roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName.toString(),level:PlatConst.level,viplevel:PlatConst.vipLevel,power:1,coinNumber:0,isNew:1,createTime:PlatConst.createTimestamp,lastUpgradeTime:e})},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(ZsyWxPlatform.prototype,"ZsyWxPlatform",["Platform"]);var BattleQualityEnum;!function(t){t[t.HIGHT=0]="HIGHT",t[t.LOW=1]="LOW"}(BattleQualityEnum||(BattleQualityEnum={}));var GameConfig=function(){function t(){}return t.getLanUrls=function(){var e=[];return e=[this.getResRemoteUrl(!0)+"language.zip?v="+t.version]},t.getConfigUrls=function(){var e=[];return e=[this.getResRemoteUrl(!0)+"config.zip?v="+t.version]},t.getLanUrl=function(){var t=parseInt(LocalData.getData("lan_config_index","0")),e=this.getLanUrls();return t=0,e[t]},t.getConfigUrl=function(){var t=parseInt(LocalData.getData("cfg_config_index","0")),e=this.getConfigUrls();return t=0,e[t]},t.getClientConfigUrl=function(){return this.getResRemoteUrl(!0)+"gameConfig.json?v="+Math.random()},t.getResourName=function(){return this.getResRemoteUrl()+"default.res.json?v="+t.version},t.getThemeUrl=function(){return this.getResRemoteUrl(!0)+"default.thm.json?v="+t.version},t.getServerListUrl=function(){return LoginConst.getResUrl("serverList.json?v="+Math.random(),"")},t.getNoticeUrl=function(){return LoginConst.getResUrl("notice.txt?v="+Math.random(),"")},t.getBattleVideoUrl=function(){return this.getResRemoteUrl()+"battleVideo.zip?v="+t.version},t.getIsNotchScreen=function(){return this.m_notchScreen},t.setIsNotchScreen=function(t){this.m_notchScreen=t},t.setWHRatio=function(t){this.WH_Ratio=t},t.getWHRatio=function(){return this.WH_Ratio},t.curStage=function(){return egret.MainContext.instance.stage},t.curWidth=function(){return egret.MainContext.instance.stage.stageWidth},t.curHeight=function(){return egret.MainContext.instance.stage.stageHeight},t.initBestScale=function(){this.bestScale=Math.min(egret.MainContext.instance.stage.stageWidth/1334,egret.MainContext.instance.stage.stageHeight/750),this.bestScale>1&&(this.bestScale=1)},t.getBestScale=function(){return this.initBestScale(),this.bestScale},t.getResRemoteUrl=function(t){return void 0===t&&(t=!1),PlatConst.getResRemoteUrl(t)},t.getSub=function(){return 750-egret.MainContext.instance.stage.stageHeight>0?750-egret.MainContext.instance.stage.stageHeight:0},t.account="b",t.notchPixel=60,t.BTEELE_QUALITY=BattleQualityEnum.HIGHT,t.MusicIsPlay=!0,t.EffectIsPlay=!0,t.bGuideIsOpen=!0,t.testGuideIds="",t.fontDefault="Microsoft YaHei",t.TextColors={white:16777215,milkWhite:16511407,grayWhite:9079454,gray:8882053,fontWhite:15329766,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:16711680,green:65280,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720,stroke:6175766,stroke2:8542039,stroke3:5191715,goldYellow:16762135,goldYellow2:16760832,quality0:10912607,quality1:7401797,quality2:4509939,quality3:15817203,quality4:15967561,quality5:16721703},t.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},t.bestScale=1,t}();__reflect(GameConfig.prototype,"GameConfig");var ZsyPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.m_token="",this.m_sign="",this.d_platform="",this.d_openid="",this.d_time="",this.d_extinfo="",this.d_invited_role_id="",this.d_callback_url="",this.s_gameUID="",this.s_channelUID="",this.count=1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){var t=this,e=PlatConst.getUrlGet();console.log("initPlatform info: ",e),this.s_gameUID=e.gameUID,this.s_channelUID=e.channelUID,PlatConst.platformUid=e.cmgePlayerId,window.cmgeH5GameSDK=new window.CmgeH5GameSDK({gameUID:e.gameUID,channelUID:e.channelUID,loginTime:e.loginTime,cmgePlayerId:e.cmgePlayerId,channelUserId:e.channelUserId,platformID:e.platformID,cps:e.cps,mixChannelUID:e.mixChannelUID,extend:decodeURIComponent(e.extend),sign:e.sign,share:{timeline:{title:"分享朋友圈标题",imgUrl:"分享朋友圈图片链接",success:function(){alert("测试游戏："+e.gameUID+" 渠道："+e.channelUID+" 分享朋友圈成功")},cancel:function(){alert("测试游戏："+e.gameUID+" 渠道："+e.channelUID+" 取消朋友圈分享")}},friend:{title:"分享给好友的标题",desc:"分享给好友的描述",imgUrl:"https://download.cmge.com/web/cmge-117-vertical.png",success:function(){alert("测试游戏："+e.gameUID+" 渠道："+e.channelUID+" 分享朋友成功")},cancel:function(){alert("测试游戏："+e.gameUID+" 渠道："+e.channelUID+" 取消朋友分享")}},shareCustomParam:{cp_param1:"参数值1",cp_param2:"参数值2",cp_title:"cp分享标题",cp_desc:"cp分享描述",cp_icon:"",callback:function(t){alert("分享成功"),console.info(t)}}},subscribe:{success:function(){alert("关注成功")},cancel:function(){alert("取消关注")}},shortcut:{name:"游戏名称",icon:"",callback:function(t){alert("快捷方式发送完成"),console.info(t)}}}),window.cmgeH5GameSDK.cpUserLogin=function(e){console.log("cpUserLogin: ",e);var n={gameUID:t.s_gameUID,channelUID:t.s_channelUID,cmgePlayerId:e.cmgePlayerId,loginTime:e.loginTime,sign:e.sign,channelUserId:e.channelUserId,platformID:e.platformID,mixChannelUID:e.mixChannelUID,cps:e.cps,channel_id:"507",type:"login_sign"};console.log("cpUserLogin json--: ",JSON.stringify(n)),Mini.HttpClient.get(function(t){"0"==t?(PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"507",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=507):console.log("登录失败："+t.msg)},t,"code=14&jstr="+JSON.stringify(n),"https://h5.373yx.com/sdk/SdkSendData")}},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return LoginManager.runGame(),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.loginGame=function(t,e,n,o){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c,p,u,d,m,h,g,f,_,v,C,y,P,S,I;return __generator(this,function(w){return i=(new Date).getTime(),a=PlatConst.zoneId.toString(),s=PlatConst.zoneId.toString(),l=PlatConst.zoneName,c=PlatConst.zoneName,p=PlatConst.nickName,u=PlatConst.nickName,d=PlatConst.playerId.toString(),m=n,h=0,g="roleid="+PlatConst.playerId+"~productId="+e.toString(),f=100*o,_=e,v=3,C=e,y=n,P=PlatConst.level,S=PlatConst.vipLevel,I={gameUID:window.cmgeH5GameSDK.gameUID,channelUID:window.cmgeH5GameSDK.channelUID,cmgePlayerId:window.cmgeH5GameSDK.cmgePlayerId,serverID:a.toString(),oldServerID:s.toString(),serverName:l,oldServerName:c,roleId:d.toString(),roleName:p,oldRoleName:u,subject:m,coinNumber:h.toString(),money:f.toString(),itemID:_.toString(),version:v.toString(),productID:C.toString(),productName:y,roleLevel:P.toString(),roleVipLevel:S.toString(),cpExtend:g},Mini.HttpClient.get(function(e){r=JSON.parse(e),window.cmgeH5GameSDK.Pay({money:f,cmgePlayerId:window.cmgeH5GameSDK.cmgePlayerId,serverID:a,oldServerID:s,serverName:l,oldServerName:c,roleName:p,oldRoleName:u,orderNo:t.toString(),subject:m,coinNumber:h,itemID:_,cpExtend:g,version:v,sign:r.sign,productID:C,productName:y,roleId:d,roleLevel:P})},this,"code=15&jstr="+JSON.stringify(I),"https://h5.373yx.com/sdk/SdkSendData"),[2]})})},t.prototype.reportRegister=function(){this.zsyReportData("1")},t.prototype.reportLogin=function(){this.zsyReportData("2")},t.prototype.reportData=function(t){"levelUp"==t&&this.zsyReportData("3")},t.prototype.zsyReportData=function(t){var e=(new Date).getTime(),n={gameType:"武侠",serverId:PlatConst.zoneId.toString(),oldServerID:"1",serverName:PlatConst.zoneName.toString(),oldServerName:"1",roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName.toString(),level:PlatConst.level,viplevel:PlatConst.vipLevel,power:1,coinNumber:0,isNew:1,createTime:PlatConst.createTimestamp,lastUpgradeTime:e};window.cmgeH5GameSDK.transPlayerInfo(n)},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(ZsyPlatform.prototype,"ZsyPlatform",["Platform"]);var LoginConst=function(){function t(){}return t.getResUrl=function(t,e){if(void 0===e&&(e="login"),!t||""==t)return"";var n=0==$Platform?"http://192.168.0.18:7979/":$PlatformSrc;return""==e?""+n+t:""+n+e+"/"+t+"?v="+GameConfig.version},t.systemType=function(){var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i);return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")},t.isWeiXin=function(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"null"==e?!1:"micromessenger"==e?!0:void 0},t.platformType=function(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"},t.isLowMcMachine=function(){return PlatConst.isLowMcMachine()},t.getSerStateLab=function(t){return 1==t?"<font color=#FF0000>[爆满]</font>":2==t?"<font color=#90FC5B>[流畅]</font>":3==t?"<font color=#8A8A9E>[维护]</font>":4==t?"<font color=#90FC5B>[推荐]</font>":"<font color=#8A8A9E>[维护]</font>"},t.addTouchEvent=function(t,e,n){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScaleTouch,n),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onScaleTouch,n),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onScaleTouch,n),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onScaleTouch,n),t.$touchFunc=e,t.$touchTaget=n},t.removeTouchEvent=function(t,e,n){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScaleTouch,n),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onScaleTouch,n),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onScaleTouch,n),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onScaleTouch,n),delete t.$touchFunc,delete t.$touchTaget},t.onScaleTouch=function(t){var e=t.currentTarget;t.stopImmediatePropagation(),egret.Tween.removeTweens(e);var n=egret.Tween.get(e);switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:n.to({scaleX:TOUCH_SCALE_XY,scaleY:TOUCH_SCALE_XY},TOUCH_SCALE_DEALY);break;case egret.TouchEvent.TOUCH_END:n.to({scaleX:1,scaleY:1},TOUCH_SCALE_DEALY),e.$touchFunc&&e.$touchTaget&&e.$touchFunc.call(e.$touchTaget);break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:case egret.TouchEvent.TOUCH_CANCEL:var n=egret.Tween.get(e);n.to({scaleX:1,scaleY:1},TOUCH_SCALE_DEALY)}},t.createImage=function(e,n,o,r,i,a){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=!1);var s=new eui.Image(t.getResUrl(e));return s.x=n,s.y=o,r>0&&(s.width=r),i>0&&(s.height=i),s.touchEnabled=a,s},t.createLabel=function(t,e,n,o,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=20),void 0===r&&(r=15329766),void 0===i&&(i=!1);var a=new eui.Label(t);return a.x=e,a.y=n,a.size=o,a.textColor=r,a.touchEnabled=i,a},t}();__reflect(LoginConst.prototype,"LoginConst");var TSWeiduanPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.uid,PlatConst.platformUsername=e.name,PlatConst.token=t,PlatConst.channelId=Number(e.channelId))})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return LoginManager.runGame(),[2]})})},t.prototype.loginCallback=function(t,e){},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l;return __generator(this,function(c){return r=o,i=0,a=n,s=n,l={ext:"1234567",roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),zoneId:PlatConst.zoneId.toString(),zoneName:PlatConst.zoneName,balance:PlatConst.gold.toString(),callbackinfo:"",callbackurl:"",amount:r+"",count:i+"",cp_order_id:t,describe:a,pname:s,viplevel:PlatConst.vipLevel.toString(),partyname:PlatConst.guildName,product_id:e,type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(l)),console.log("---测试onClickbuy:"+JSON.stringify(l)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e=PlatConst.gender?"女":"男",n={id:t,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),zoneiId:PlatConst.zoneId.toString(),zoneName:PlatConst.zoneName,balance:PlatConst.gold.toString(),viplevel:PlatConst.vipLevel.toString(),partyName:PlatConst.guildName,extra:"",roleCreateTime:PlatConst.createTimestamp.toString(),gameRoleGender:e,rolePower:PlatConst.power.toString(),partyRoleId:"123456",partyId:PlatConst.guildId.toString(),partyRoleName:"",professionId:PlatConst.countryId.toString(),profession:PlatConst.countryName,chapter:PlatConst.norCopyId,friendList:"无",type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(n)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(n))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(TSWeiduanPlatform.prototype,"TSWeiduanPlatform",["Platform"]);var QunHeiPlatform=function(){function t(){this.m_httpServerUrl2="https://h5.373yx.com/sdk/SdkSendData",this.time=0,this.isadult=0,this.qhzoneId=0}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){var t=PlatConst.getUrlGet();PlatConst.platformUsername=t.username,this.qhzoneId=t.serverid,this.time=t.time,this.isadult=t.isadult,this.uimg=t.uimg,this.nname=t.nname,this.unid=t.unid,this.qhchannel=t.qhchannel,this.qhchannelid=t.qhchannelid,this.showbtn=t.showbtn,this.flag=t.flag;var e={username:PlatConst.platformUsername,gid:"4537",qhchannel:this.qhchannel,qhchannelid:this.qhchannelid,time:this.time};window.qhsdk.init(e),console.log(JSON.stringify(e))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return PlatConst.token=JSON.stringify({username:PlatConst.platformUsername,uid:PlatConst.platformUsername,qyChannelId:"502",type:"login",token:PlatConst.platformUsername}),PlatConst.channelId=502,LoginManager.runGame(),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return window.qhsdk.share(function(t){"shareok"==t.data}),[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c,p;return __generator(this,function(u){return r=o,i=e,a=n,s="serverid="+PlatConst.zoneId+"|productid="+i+"|cp_order_id="+t,l=new md5,c=l.hex_md5(""+r+PlatConst.platformUsername+s+"17c3385d0b97b1ac553a90e851a09384"),p={userId:PlatConst.platformUsername,gid:"4537",roleName:this.nname,goodsId:i.toString(),goodsName:a.toString(),money:r,ext:s,serverId:this.qhzoneId,roleId:PlatConst.playerId.toString(),sign:c},window.qhsdk.pay(p,function(t,e){console.log(t+","+e)}),[2]})})},t.prototype.reportRegister=function(){var t={act:"1",serverid:t.zoneId,rolename:this.nname,roleid:t.playerId,level:t.level,power:t.power};window.qhsdk.role(t)},t.prototype.reportLogin=function(){},t.prototype.reportData=function(t){},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(QunHeiPlatform.prototype,"QunHeiPlatform",["Platform"]);var Mini;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.width=GameConfig.curWidth(),e.height=GameConfig.curHeight(),e}return __extends(e,t),e.prototype.onDestroy=function(){this.m_rectMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMaskClickListener,this),LoginConst.removeTouchEvent(this.m_imgClose,this.onMaskClickListener,this),this.parent&&this.parent.removeChild(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.m_rectMask=new eui.Rect(GameConfig.curWidth(),GameConfig.curHeight(),0),this.m_rectMask.alpha=.6,this.addChild(this.m_rectMask),this.m_rectMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMaskClickListener,this),this.m_pRoot=new eui.Group,this.m_pRoot.horizontalCenter=0,this.m_pRoot.verticalCenter=0,this.addChild(this.m_pRoot),this.m_imgBg=new eui.Image(LoginConst.getResUrl("login_frame.jpg")),this.m_imgBg.scale9Grid=new egret.Rectangle(257,77,318,33),this.m_pRoot.addChild(this.m_imgBg),this.m_labTitle=new eui.Label("公 告"),this.m_labTitle.y=12,this.m_labTitle.horizontalCenter=0,this.m_labTitle.size=36,this.m_labTitle.textColor=16777113,this.m_pRoot.addChild(this.m_labTitle),this.m_imgClose=LoginConst.createImage("close_btn.png",null,null,null,null,!0),this.m_imgClose.top=-5,this.m_imgClose.right=-10,this.m_pRoot.addChildAt(this.m_imgClose,999),LoginConst.addTouchEvent(this.m_imgClose,this.onMaskClickListener,this)},e.prototype.setSize=function(t,e){this.m_imgBg.width=t,this.m_imgBg.height=e},e.prototype.setTitle=function(t){this.m_labTitle.text=t},e.prototype.onMaskClickListener=function(){this.onDestroy()},e}(eui.Component);t.CMaskWnd=e,__reflect(e.prototype,"Mini.CMaskWnd")}(Mini||(Mini={}));var IPSeEnum;!function(t){t[t.QI_YUAN=0]="QI_YUAN",t[t.TUO_SHI=1]="TUO_SHI",t[t.MO_LE=2]="MO_LE",t[t.QUN_HEI=3]="QUN_HEI",t[t.MZ_YW=4]="MZ_YW",t[t.DD_T=5]="DD_T",t[t.DDT_WX=6]="DDT_WX",t[t.MZYW_APK=7]="MZYW_APK",t[t.ZS_Y=8]="ZS_Y",t[t.J_Z=9]="J_Z",t[t.H_Y=10]="H_Y"
}(IPSeEnum||(IPSeEnum={}));var PlatEnum;!function(t){t[t.NORMAL=0]="NORMAL",t[t.WE_CHAT=1]="WE_CHAT",t[t.QQ_CHAT=2]="QQ_CHAT",t[t.WEB=3]="WEB",t[t.TS_WEIDUAN=101]="TS_WEIDUAN",t[t.MOLE_WEB=201]="MOLE_WEB",t[t.QUNHEI_WEB=301]="QUNHEI_WEB",t[t.MZYW_WEB=401]="MZYW_WEB",t[t.MZYW_IOS=402]="MZYW_IOS",t[t.DDT_WEB=501]="DDT_WEB",t[t.DDT_WE_CHAT=601]="DDT_WE_CHAT",t[t.MZYW_ALL_APK=701]="MZYW_ALL_APK",t[t.ZSY_WEB=801]="ZSY_WEB",t[t.ZSY_WE_CHAT=802]="ZSY_WE_CHAT",t[t.JZ_APK=901]="JZ_APK",t[t.JZ_APK2=902]="JZ_APK2",t[t.JZ_APK3=903]="JZ_APK3",t[t.JZ_APK4=904]="JZ_APK4",t[t.JZ_H5=905]="JZ_H5",t[t.HY_APK=1001]="HY_APK"}(PlatEnum||(PlatEnum={}));var ReportType=function(){function t(){}return t.levelup="levelUp",t.enterServer="enterServer",t.createRole="createRole",t}();__reflect(ReportType.prototype,"ReportType");var PlatConst=function(){function t(){}return t.getIpsId=function(){switch(this.platform){case PlatEnum.TS_WEIDUAN:return IPSeEnum.TUO_SHI;case PlatEnum.MOLE_WEB:return IPSeEnum.MO_LE;case PlatEnum.QUNHEI_WEB:return IPSeEnum.QUN_HEI;case PlatEnum.MZYW_WEB:case PlatEnum.MZYW_IOS:return IPSeEnum.MZ_YW;case PlatEnum.DDT_WEB:return IPSeEnum.DD_T;case PlatEnum.DDT_WE_CHAT:return IPSeEnum.DDT_WX;case PlatEnum.MZYW_ALL_APK:return IPSeEnum.MZYW_APK;case PlatEnum.ZSY_WEB:case PlatEnum.ZSY_WE_CHAT:return IPSeEnum.ZS_Y;case PlatEnum.JZ_APK:case PlatEnum.JZ_APK2:case PlatEnum.JZ_APK3:case PlatEnum.JZ_APK4:case PlatEnum.JZ_H5:return IPSeEnum.J_Z;case PlatEnum.HY_APK:return IPSeEnum.H_Y;default:return IPSeEnum.QI_YUAN}},t.getResRemoteUrl=function(t){return void 0===t&&(t=!1),t||$Platform!=PlatEnum.MZYW_ALL_APK?$PlatformSrc+"resource/":"/resource/"},t.isLowMcMachine=function(){switch(this.platform){case PlatEnum.WE_CHAT:case PlatEnum.QQ_CHAT:case PlatEnum.DDT_WE_CHAT:case PlatEnum.ZSY_WE_CHAT:return!0;default:return!1}},t.isNormalPay=function(){switch(this.platform){case PlatEnum.NORMAL:case PlatEnum.WEB:return!1;default:return!0}},t.isHideAccount=function(){switch(this.platform){case PlatEnum.NORMAL:case PlatEnum.WEB:return!1;default:return!0}},t.isShowNotice=function(){switch(t.platform){case PlatEnum.NORMAL:case PlatEnum.MZYW_WEB:case PlatEnum.MZYW_ALL_APK:case PlatEnum.JZ_APK:case PlatEnum.JZ_APK2:case PlatEnum.JZ_APK3:case PlatEnum.JZ_APK4:case PlatEnum.JZ_H5:case PlatEnum.HY_APK:return!0}return!1},t.isPlatJZ=function(){return t.platform==PlatEnum.NORMAL||this.getIpsId()==IPSeEnum.J_Z?!0:!1},t.isWxApp=function(){switch(t.platform){case PlatEnum.DDT_WE_CHAT:case PlatEnum.WE_CHAT:case PlatEnum.ZSY_WE_CHAT:return!0}return!1},t.getUrlGet=function(){var t=window.document.location.href.toString(),e=t.split("?");if(e[1]){e=e[1].split("&");var n={};for(var o in e){var r=e[o].split("=");n[r[0]]=r[1]}return n}return{}},t.isDebugPlat=function(){switch(t.platform){case PlatEnum.NORMAL:case PlatEnum.WEB:return!0}return!1},t.isRmbPay=function(){switch(t.platform){case PlatEnum.MZYW_IOS:return!1}return!0},t.zoneId=1,t.zoneName="",t.channelId=0,t.token="",t.timestamp="",t.platformId="",t.platformUid="",t.platformUsername="",t.platform=0,t.power=0,t.vipLevel=0,t.guildId=0,t.guildName="",t.nickName="",t.gold=0,t.gender=0,t.countryId=0,t.countryName="",t.norCopyId=0,t}();__reflect(PlatConst.prototype,"PlatConst");var LocalData=function(){function t(){}return t.setData=function(t,e){egret.localStorage.setItem(t,e)},t.getData=function(t,e){void 0===e&&(e="");var n;return n=egret.localStorage.getItem(t),n?n:e},t.removeData=function(t){egret.localStorage.removeItem(t)},t.setOpenId=function(t){this.setData(this.OPEN_ID,t)},t.getOpenId=function(){return this.getData(this.OPEN_ID)||"huanggj"},t.OPEN_ID="h5sdk.openid",t}();__reflect(LocalData.prototype,"LocalData");var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var o=Array(16),r=Array(16),i=0;16>i;i++)o[i]=909522486^n[i],r[i]=1549556828^n[i];var a=this.binl_md5(o.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<t.length;i++)n=t.charCodeAt(i),r+=o.charAt(n>>>4&15)+o.charAt(15&n);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",r=t.length,i=0;r>i;i+=3)for(var a=t.charCodeAt(i)<<16|(r>i+1?t.charCodeAt(i+1)<<8:0)|(r>i+2?t.charCodeAt(i+2):0),s=0;4>s;s++)o+=8*i+6*s>8*t.length?this.b64pad:n.charAt(a>>>6*(3-s)&63);return o},t.prototype.rstr2any=function(t,e){var n,o,r,i,a,s=e.length,l=Array(Math.ceil(t.length/2));for(n=0;n<l.length;n++)l[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),p=Array(c);for(o=0;c>o;o++){for(a=Array(),i=0,n=0;n<l.length;n++)i=(i<<16)+l[n],r=Math.floor(i/s),i-=r*s,(a.length>0||r>0)&&(a[a.length]=r);p[o]=i,l=a}var u="";for(n=p.length-1;n>=0;n--)u+=e.charAt(p[n]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,n,o="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),r++),127>=e?o+=String.fromCharCode(e):2047>=e?o+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,l=o,c=r,p=i;n=this.md5_ff(n,o,r,i,t[a+0],7,-680876936),i=this.md5_ff(i,n,o,r,t[a+1],12,-389564586),r=this.md5_ff(r,i,n,o,t[a+2],17,606105819),o=this.md5_ff(o,r,i,n,t[a+3],22,-1044525330),n=this.md5_ff(n,o,r,i,t[a+4],7,-176418897),i=this.md5_ff(i,n,o,r,t[a+5],12,1200080426),r=this.md5_ff(r,i,n,o,t[a+6],17,-1473231341),o=this.md5_ff(o,r,i,n,t[a+7],22,-45705983),n=this.md5_ff(n,o,r,i,t[a+8],7,1770035416),i=this.md5_ff(i,n,o,r,t[a+9],12,-1958414417),r=this.md5_ff(r,i,n,o,t[a+10],17,-42063),o=this.md5_ff(o,r,i,n,t[a+11],22,-1990404162),n=this.md5_ff(n,o,r,i,t[a+12],7,1804603682),i=this.md5_ff(i,n,o,r,t[a+13],12,-40341101),r=this.md5_ff(r,i,n,o,t[a+14],17,-1502002290),o=this.md5_ff(o,r,i,n,t[a+15],22,1236535329),n=this.md5_gg(n,o,r,i,t[a+1],5,-165796510),i=this.md5_gg(i,n,o,r,t[a+6],9,-1069501632),r=this.md5_gg(r,i,n,o,t[a+11],14,643717713),o=this.md5_gg(o,r,i,n,t[a+0],20,-373897302),n=this.md5_gg(n,o,r,i,t[a+5],5,-701558691),i=this.md5_gg(i,n,o,r,t[a+10],9,38016083),r=this.md5_gg(r,i,n,o,t[a+15],14,-660478335),o=this.md5_gg(o,r,i,n,t[a+4],20,-405537848),n=this.md5_gg(n,o,r,i,t[a+9],5,568446438),i=this.md5_gg(i,n,o,r,t[a+14],9,-1019803690),r=this.md5_gg(r,i,n,o,t[a+3],14,-187363961),o=this.md5_gg(o,r,i,n,t[a+8],20,1163531501),n=this.md5_gg(n,o,r,i,t[a+13],5,-1444681467),i=this.md5_gg(i,n,o,r,t[a+2],9,-51403784),r=this.md5_gg(r,i,n,o,t[a+7],14,1735328473),o=this.md5_gg(o,r,i,n,t[a+12],20,-1926607734),n=this.md5_hh(n,o,r,i,t[a+5],4,-378558),i=this.md5_hh(i,n,o,r,t[a+8],11,-2022574463),r=this.md5_hh(r,i,n,o,t[a+11],16,1839030562),o=this.md5_hh(o,r,i,n,t[a+14],23,-35309556),n=this.md5_hh(n,o,r,i,t[a+1],4,-1530992060),i=this.md5_hh(i,n,o,r,t[a+4],11,1272893353),r=this.md5_hh(r,i,n,o,t[a+7],16,-155497632),o=this.md5_hh(o,r,i,n,t[a+10],23,-1094730640),n=this.md5_hh(n,o,r,i,t[a+13],4,681279174),i=this.md5_hh(i,n,o,r,t[a+0],11,-358537222),r=this.md5_hh(r,i,n,o,t[a+3],16,-722521979),o=this.md5_hh(o,r,i,n,t[a+6],23,76029189),n=this.md5_hh(n,o,r,i,t[a+9],4,-640364487),i=this.md5_hh(i,n,o,r,t[a+12],11,-421815835),r=this.md5_hh(r,i,n,o,t[a+15],16,530742520),o=this.md5_hh(o,r,i,n,t[a+2],23,-995338651),n=this.md5_ii(n,o,r,i,t[a+0],6,-198630844),i=this.md5_ii(i,n,o,r,t[a+7],10,1126891415),r=this.md5_ii(r,i,n,o,t[a+14],15,-1416354905),o=this.md5_ii(o,r,i,n,t[a+5],21,-57434055),n=this.md5_ii(n,o,r,i,t[a+12],6,1700485571),i=this.md5_ii(i,n,o,r,t[a+3],10,-1894986606),r=this.md5_ii(r,i,n,o,t[a+10],15,-1051523),o=this.md5_ii(o,r,i,n,t[a+1],21,-2054922799),n=this.md5_ii(n,o,r,i,t[a+8],6,1873313359),i=this.md5_ii(i,n,o,r,t[a+15],10,-30611744),r=this.md5_ii(r,i,n,o,t[a+6],15,-1560198380),o=this.md5_ii(o,r,i,n,t[a+13],21,1309151649),n=this.md5_ii(n,o,r,i,t[a+4],6,-145523070),i=this.md5_ii(i,n,o,r,t[a+11],10,-1120210379),r=this.md5_ii(r,i,n,o,t[a+2],15,718787259),o=this.md5_ii(o,r,i,n,t[a+9],21,-343485551),n=this.safe_add(n,s),o=this.safe_add(o,l),r=this.safe_add(r,c),i=this.safe_add(i,p)}return[n,o,r,i]},t.prototype.md5_cmn=function(t,e,n,o,r,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(o,i)),r),n)},t.prototype.md5_ff=function(t,e,n,o,r,i,a){return this.md5_cmn(e&n|~e&o,t,e,r,i,a)},t.prototype.md5_gg=function(t,e,n,o,r,i,a){return this.md5_cmn(e&o|n&~o,t,e,r,i,a)},t.prototype.md5_hh=function(t,e,n,o,r,i,a){return this.md5_cmn(e^n^o,t,e,r,i,a)},t.prototype.md5_ii=function(t,e,n,o,r,i,a){return this.md5_cmn(n^(e|~o),t,e,r,i,a)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e),o=(t>>16)+(e>>16)+(n>>16);return o<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var MzywPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.m_token="",this.m_sign="",this.count=1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){var t=PlatConst.getUrlGet();PlatConst.platformUid=t.userId,this.m_sign=t.sign},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t={channel_id:"503",sign:this.m_sign,userId:PlatConst.platformUid.toString(),type:"login_sign"},Mini.HttpClient.get(function(t){"0"==t?(PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"503",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=503,LoginManager.runGame()):console.log("登录失败："+t.msg)},this,"code=5&jstr="+JSON.stringify(t),this.m_httpServerUrl),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.loginGame=function(t,e,n,o){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var n,r,i,a;return __generator(this,function(s){return n="rolename="+PlatConst.nickName,r=100*o,a={cp_order_id:t.toString(),amount:r,userId:PlatConst.platformUid.toString(),level:PlatConst.level,server_id:PlatConst.zoneId.toString()},Mini.HttpClient.get(function(o){i=JSON.parse(o),window.mzh5sdk.placeOrder({userId:PlatConst.platformUid.toString(),packetId:i.packetId,coin_name:"钻石",game_id:i.gameId,pay_type:"iospay",cp_order_id:t.toString(),amount:r,server_id:PlatConst.zoneId.toString(),level:PlatConst.level,transData:n,role_id:PlatConst.playerId.toString(),roduct_id:e.toString,sign:i.sign})},this,"code=6&jstr="+JSON.stringify(a),this.m_httpServerUrl),[2]})})},t.prototype.reportRegister=function(){console.log("---mzh5sdk uploadRole"),window.mzh5sdk.uploadRole({u:PlatConst.platformUid.toString(),g:"1189",s:PlatConst.zoneId.toString(),sn:PlatConst.zoneName.toString(),r:PlatConst.playerId.toString(),rn:PlatConst.nickName.toString(),rl:PlatConst.level.toString(),cn:"0",rvl:PlatConst.vipLevel.toString()})},t.prototype.reportLogin=function(){},t.prototype.reportData=function(t){},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(MzywPlatform.prototype,"MzywPlatform",["Platform"]);var DdtPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.m_token="",this.m_sign="",this.d_platform="",this.d_openid="",this.d_time="",this.d_extinfo="",this.d_invited_role_id="",this.d_callback_url="",this.count=1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){var t=PlatConst.getUrlGet();PlatConst.platformUid=t.uid,this.m_sign=t.sign,this.d_platform=t.platform,this.d_openid=t.openid,this.d_appid=t.appid,this.d_sid=t.sid,this.d_time=t.time,this.d_extinfo=t.extinfo,this.d_invited_role_id=t.invited_role_id,this.d_callback_url=t.callback_url,window.DDTGame.inIt({platform:this.d_platform,uid:PlatConst.platformUid,appid:this.d_appid,openid:this.d_openid,extInfo:this.d_extinfo,debug:!1})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t={channel_id:"504",sign:this.m_sign,appid:this.d_appid,callback_url:this.d_callback_url,extinfo:this.d_extinfo,invited_role_id:this.d_invited_role_id,openid:this.d_openid,platform:this.d_platform,sid:this.d_sid,time:this.d_time,uid:PlatConst.platformUid.toString(),type:"login_sign"},Mini.HttpClient.get(function(t){"0"==t?(PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"504",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=504,LoginManager.runGame()):console.log("登录失败："+t.msg)},this,"code=8&jstr="+JSON.stringify(t),this.m_httpServerUrl),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.loginGame=function(t,e,n,o){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c=this;return __generator(this,function(p){return r="rolename="+PlatConst.nickName+"~roleid="+PlatConst.playerId+"~productId="+e.toString(),i=o,s=(new Date).getTime(),l={cp_orderid:t.toString(),amount:i,uid:PlatConst.platformUid,cp_extinfo:r,extinfo:this.d_extinfo,item_id:e,item_name:n,role_name:PlatConst.nickName,sid:PlatConst.zoneId,time:s},Mini.HttpClient.get(function(o){a=JSON.parse(o),window.DDTGame.Pay({cp_orderid:t.toString(),amount:i,uid:PlatConst.platformUid,appid:a.gameId,role_name:PlatConst.nickName,item_name:n,sid:PlatConst.zoneId,cp_extinfo:r,extinfo:c.d_extinfo,item_id:e,time:s,sign:a.sign})},this,"code=7&jstr="+JSON.stringify(l),this.m_httpServerUrl),[2]})})},t.prototype.reportRegister=function(){this.ddtReportData("1")},t.prototype.reportLogin=function(){this.ddtReportData("2")},t.prototype.reportData=function(t){"levelUp"==t&&this.ddtReportData("3")},t.prototype.ddtReportData=function(t){var e=(new Date).getTime(),n={type:t,uid:PlatConst.platformUid.toString(),roleid:PlatConst.playerId.toString(),role_name:PlatConst.nickName.toString(),sid:PlatConst.zoneId.toString(),server_name:PlatConst.zoneName.toString(),level:PlatConst.level.toString(),power:"0",vip:PlatConst.vipLevel.toString(),time:e.toString(),create_time:PlatConst.createTimestamp.toString()};Mini.HttpClient.get(function(n){var o=JSON.parse(n);window.DDTGame.onUserInfo({type:t,appid:o.gameId,uid:PlatConst.platformUid,roleid:PlatConst.playerId.toString(),role_name:PlatConst.nickName,sid:PlatConst.zoneId,server_name:PlatConst.zoneName,level:PlatConst.level,power:0,vip:PlatConst.vipLevel.toString(),time:e,create_time:PlatConst.createTimestamp,sign:o.sign})},this,"code=9&jstr="+JSON.stringify(n),this.m_httpServerUrl)},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(DdtPlatform.prototype,"DdtPlatform",["Platform"]);var DdtWxPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.m_token="",this.d_openid="",this.d_pf_ver="",this.count=1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){return t=JSON.parse(JSON.stringify($loginInfo)),PlatConst.platformUid=t.pf_uid,this.d_openid=t.openid,this.d_pf_appid=t.pf_appid,this.d_pf_UqGatv=t.pf_UqGatv,this.d_pf_ver=t.pf_ver,this.d_time=t.time,this.m_token=t.token,console.log("ts达达兔微信小游戏login数据:",PlatConst.platformUid),e={channel_id:"505",openid:this.d_openid.toString(),pf_appid:this.d_pf_appid.toString(),pf_UqGatv:this.d_pf_UqGatv.toString(),pf_ver:this.d_pf_ver.toString(),time:this.d_time.toString(),token:this.m_token.toString(),pf_uid:PlatConst.platformUid.toString(),type:"login_sign"},Mini.HttpClient.get(function(t){"0"==t?(PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"505",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=505,LoginManager.runGame()):LoginManager.showTips("登录失败："+t.msg)},this,"code=12&jstr="+JSON.stringify(e),this.m_httpServerUrl),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){var n="uhX7C6jGThOpS/wwMN3gBA==",o="https://mmocgame.qpic.cn/wechatgame/Z8iaqQZ8v1fKNDu6Qv1rdVic7ick3lWBWghSg1tGhicmgSvgCdq0wWADLhgvyjFDibDJ0/0";wx.showShareMenu({withShareTicket:!0,success:function(t){console.log(t,"转发成功")},fail:function(t){console.log(t,"转发失败")},complete:function(t){console.log(t,"转发完成")}}),wx.onShareAppMessage(function(){return{title:"别惹三国ol",imageUrlId:n,imageUrl:o}})})]})})},t.prototype.share=function(t){},t.prototype.loginGame=function(t,e,n,o){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l;return __generator(this,function(c){return r="rolename="+PlatConst.nickName+"~roleid="+PlatConst.playerId+"~productId="+e.toString(),i=o,s=Math.floor((new Date).getTime()/1e3),l={cp_orderid:t.toString(),amount:i,uid:PlatConst.platformUid,appid:this.d_pf_appid,cp_extinfo:r,extinfo:"null",item_id:e,item_name:n,role_name:PlatConst.nickName,sid:PlatConst.zoneId,time:s},Mini.HttpClient.get(function(o){a=JSON.parse(o),window.LBGame.SylxTK({cp_orderid:t.toString(),amount:i,uid:PlatConst.platformUid,appid:a.gameId,role_name:PlatConst.nickName,item_name:n.toString(),sid:PlatConst.zoneId.toString(),cp_extinfo:a.cpextinfo64,extinfo:"null",item_id:e,time:s,sign:a.sign})},this,"code=10&jstr="+JSON.stringify(l),this.m_httpServerUrl),[2]})})},t.prototype.reportRegister=function(){this.ddtReportData("1")},t.prototype.reportLogin=function(){this.ddtReportData("2")},t.prototype.reportData=function(t){"levelUp"==t&&this.ddtReportData("3")},t.prototype.ddtReportData=function(t){var e=(new Date).getTime(),n={type:t,uid:PlatConst.platformUid.toString(),roleid:PlatConst.playerId.toString(),role_name:PlatConst.nickName.toString(),sid:PlatConst.zoneId.toString(),server_name:PlatConst.zoneName.toString(),level:PlatConst.level.toString(),power:"0",vip:PlatConst.vipLevel.toString(),time:e.toString(),create_time:PlatConst.createTimestamp.toString()};Mini.HttpClient.get(function(n){var o=JSON.parse(n);window.LBGame.onRoleInfo({type:t,appid:o.gameId,uid:PlatConst.platformUid,roleid:PlatConst.playerId.toString(),role_name:PlatConst.nickName,sid:PlatConst.zoneId,server_name:PlatConst.zoneName,level:PlatConst.level,power:0,vip:PlatConst.vipLevel.toString(),time:e,create_time:PlatConst.createTimestamp.toString(),sign:o.sign})},this,"code=11&jstr="+JSON.stringify(n),this.m_httpServerUrl)},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return-1!=$PlatformSrc.indexOf("sh")?!0:!this.d_pf_UqGatv},t.prototype.isMsgCheckFunc=function(t,e,n){var o={content:t};Mini.HttpClient.get(function(t){"0"==t||"42001"==t||"FAILURE"==t?e.call(n,!0):e.call(n,!1)},this,"code=16&jstr="+JSON.stringify(o),this.m_httpServerUrl)},t}();__reflect(DdtWxPlatform.prototype,"DdtWxPlatform",["Platform"]);var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return LoginManager.runGame(),[2]})})},t.prototype.loginCallback=function(t,e){},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.reportRegister=function(){},t.prototype.reportLogin=function(){},t.prototype.reportData=function(t){},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]);var HyApkPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.isClickLogin=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.userId,PlatConst.platformUsername=e.username,PlatConst.token=e.sign,PlatConst.timestamp=e.timestamp,PlatConst.platformId=e.platformId,PlatConst.channelId=515,this.isClickLogin&&this.login())});var t={type:"init"};egret.ExternalInterface.call("sendToNative",JSON.stringify(t))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t,t,e;return __generator(this,function(n){return""==PlatConst.platformUid?(t={type:"init"},egret.ExternalInterface.call("sendToNative",JSON.stringify(t)),this.isClickLogin=!0,[2]):(this.isClickLogin=!1,t={channel_id:"515",timestamp:PlatConst.timestamp,platformId:PlatConst.platformId,sign:PlatConst.token,userId:PlatConst.platformUid.toString(),type:"login_sign"},e="1",PlatConst.platformUid.length>2&&PlatConst.token.length>2&&(e="0"),"0"==e?(PlatConst.token=JSON.stringify({username:"",uid:PlatConst.token,qyChannelId:"515",type:"login",token:PlatConst.platformUid}),PlatConst.channelId=515,LoginManager.runGame()):console.log("登录失败："+e),[2])})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c;return __generator(this,function(p){return r=o,i={rolename:PlatConst.nickName,productId:e.toString(),cp_orderid:t.toString()},a=0,s=n,l=n,c={roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,gameGold:"元宝",cpOrderId:t.toString(),rate:100,callBackStr:JSON.stringify(i),productName:l,money:r,exStr:"exStr",noticeUrl:"http://h5.373yx.com:2688/HyApkSdkCallback",type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(c)),console.log("---测试onClickbuy:"+JSON.stringify(c)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e=0;"createRole"==t?e=0:"enterServer"==t?e=1:"levelUp"==t&&(e=2);var n={id:t,infoType:e,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),serverId:PlatConst.zoneId,serverName:PlatConst.zoneName,vip:PlatConst.vipLevel.toString(),balance:"0",partyName:"无帮派",createRoleTime:(new Date).toString(),roleUpLevelTime:(new Date).toString(),type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(n)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(n))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(HyApkPlatform.prototype,"HyApkPlatform",["Platform"]);var JzApk2Platform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.isClickLogin=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.userId,PlatConst.platformUsername=e.username,PlatConst.token=e.sign,PlatConst.timestamp=e.timestamp,PlatConst.channelId=511,this.isClickLogin&&this.login())});var t={type:"init"};egret.ExternalInterface.call("sendToNative",JSON.stringify(t))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return""==PlatConst.platformUid?(t={type:"init"},egret.ExternalInterface.call("sendToNative",JSON.stringify(t)),this.isClickLogin=!0,[2]):(this.isClickLogin=!1,PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:PlatConst.token,qyChannelId:"511",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=511,LoginManager.runGame(),[2])})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c;return __generator(this,function(p){return r=o,i="rolename="+PlatConst.nickName+"~roleid="+PlatConst.playerId+"~productId="+e.toString()+"~uid="+PlatConst.platformUid.toString()+"~sid="+PlatConst.zoneId.toString()+"~cp_orderid="+t.toString(),a=0,s=n,l=n,c={role_id:PlatConst.playerId.toString(),palyerName:PlatConst.nickName,serverName:PlatConst.zoneName,roleLevel:PlatConst.level,serverId:PlatConst.zoneId.toString(),cpOderId:t.toString(),ratio:10,callbackinfo:i,goods:l,money:r,shopId:e.toString(),vipLevel:PlatConst.vipLevel.toString(),type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(c)),console.log("---测试onClickbuy:"+JSON.stringify(c)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e={id:t,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),ServerId:PlatConst.zoneId.toString(),ServerName:PlatConst.zoneName,RoleVipLv:PlatConst.vipLevel.toString(),user_id:PlatConst.platformUid.toString(),game_id:"1207",type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(e)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(e))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(JzApk2Platform.prototype,"JzApk2Platform",["Platform"]);var MzywIosPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.isClickLogin=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.userId,PlatConst.platformUsername=e.username,PlatConst.token=e.sign,PlatConst.timestamp=e.timestamp,PlatConst.channelId=509,this.isClickLogin&&this.login())}.bind(this));var t={type:"init"};egret.ExternalInterface.call("sendToNative",JSON.stringify(t))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return""==PlatConst.platformUid?(t={type:"init"},egret.ExternalInterface.call("sendToNative",JSON.stringify(t)),this.isClickLogin=!0,[2]):(this.isClickLogin=!1,PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"509",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=509,LoginManager.runGame(),[2])})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l;return __generator(this,function(c){return r=o,i=0,a=n,s=n,l={role_id:PlatConst.playerId.toString(),palyerName:PlatConst.nickName,serverName:PlatConst.zoneName,roleLevel:PlatConst.level,serverId:PlatConst.zoneId.toString(),cpOderId:t.toString(),ratio:10,cp_verify_host:"",goods:s,money:r,shopId:e,type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(l)),console.log("---测试onClickbuy:"+JSON.stringify(l)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e={id:t,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),ServerId:PlatConst.zoneId.toString(),ServerName:PlatConst.zoneName,RoleVipLv:PlatConst.vipLevel.toString(),user_id:PlatConst.platformUid.toString(),game_id:"1207",type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(e)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(e))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(MzywIosPlatform.prototype,"MzywIosPlatform",["Platform"]);var JzApk4Platform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.isClickLogin=!1
}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.userId,PlatConst.platformUsername=e.username,PlatConst.token=e.sign,PlatConst.timestamp=e.timestamp,PlatConst.channelId=513,this.isClickLogin&&this.login())});var t={type:"init"};egret.ExternalInterface.call("sendToNative",JSON.stringify(t))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return""==PlatConst.platformUid?(t={type:"init"},egret.ExternalInterface.call("sendToNative",JSON.stringify(t)),this.isClickLogin=!0,[2]):(this.isClickLogin=!1,PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:PlatConst.token,qyChannelId:"513",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=513,LoginManager.runGame(),[2])})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c;return __generator(this,function(p){return r=o,i="rolename="+PlatConst.nickName+"~roleid="+PlatConst.playerId+"~productId="+e.toString()+"~uid="+PlatConst.platformUid.toString()+"~sid="+PlatConst.zoneId.toString()+"~cp_orderid="+t.toString(),a=0,s=n,l=n,c={role_id:PlatConst.playerId.toString(),palyerName:PlatConst.nickName,serverName:PlatConst.zoneName,roleLevel:PlatConst.level,serverId:PlatConst.zoneId.toString(),cpOderId:t.toString(),ratio:10,callbackinfo:i,goods:l,money:r,shopId:e.toString(),vipLevel:PlatConst.vipLevel.toString(),type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(c)),console.log("---测试onClickbuy:"+JSON.stringify(c)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e={id:t,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),ServerId:PlatConst.zoneId.toString(),ServerName:PlatConst.zoneName,RoleVipLv:PlatConst.vipLevel.toString(),user_id:PlatConst.platformUid.toString(),game_id:"1207",type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(e)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(e))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(JzApk4Platform.prototype,"JzApk4Platform",["Platform"]);var JzApkPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.isClickLogin=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.userId,PlatConst.platformUsername=e.username,PlatConst.token=e.sign,PlatConst.timestamp=e.timestamp,PlatConst.channelId=510,this.isClickLogin&&this.login())});var t={type:"init"};egret.ExternalInterface.call("sendToNative",JSON.stringify(t))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return""==PlatConst.platformUid?(t={type:"init"},egret.ExternalInterface.call("sendToNative",JSON.stringify(t)),this.isClickLogin=!0,[2]):(this.isClickLogin=!1,PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:PlatConst.token,qyChannelId:"510",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=510,LoginManager.runGame(),[2])})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l,c;return __generator(this,function(p){return r=o,i="rolename="+PlatConst.nickName+"~roleid="+PlatConst.playerId+"~productId="+e.toString()+"~uid="+PlatConst.platformUid.toString()+"~sid="+PlatConst.zoneId.toString()+"~cp_orderid="+t.toString(),a=0,s=n,l=n,c={role_id:PlatConst.playerId.toString(),palyerName:PlatConst.nickName,serverName:PlatConst.zoneName,roleLevel:PlatConst.level,serverId:PlatConst.zoneId.toString(),cpOderId:t.toString(),ratio:10,callbackinfo:i,goods:l,money:r,shopId:e.toString(),vipLevel:PlatConst.vipLevel.toString(),type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(c)),console.log("---测试onClickbuy:"+JSON.stringify(c)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e={id:t,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),ServerId:PlatConst.zoneId.toString(),ServerName:PlatConst.zoneName,RoleVipLv:PlatConst.vipLevel.toString(),user_id:PlatConst.platformUid.toString(),game_id:"1207",type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(e)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(e))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(JzApkPlatform.prototype,"JzApkPlatform",["Platform"]);var JzH5Platform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.m_token="",this.m_ggid="",this.m_ggkey="",this.m_jzdata="",this.m_ver="",this.isClickLogin=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){var t=PlatConst.getUrlGet();PlatConst.platformUid=t.uid,PlatConst.platformUsername=t.username,this.m_ggid=t.ggid,this.m_token=t.token,this.m_ggkey=t.ggkey,this.m_jzdata=t.jzdata,this.m_ver=t.ver;var e={gid:this.m_ggid,Key:this.m_ggkey,ver:this.m_ver};window.h5sdk=new window.H5SDK(e)},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t={channel_id:"514",access_token:this.m_token,uid:PlatConst.platformUid.toString(),type:"login_sign"},Mini.HttpClient.get(function(t){"0"==t?(PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"514",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=514,LoginManager.runGame()):console.log("登录失败："+t.msg)},this,"code=18&jstr="+JSON.stringify(t),this.m_httpServerUrl),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var r,i,a,s,l;return __generator(this,function(c){return r=o,i={rolename:PlatConst.nickName,roleid:PlatConst.playerId.toString(),productId:e.toString(),cp_orderid:t.toString()},a=0,s=n,l=n,window.h5sdk.pay(this.m_ggid,this.m_ggkey,this.m_token,r.toString(),PlatConst.platformUid.toString(),PlatConst.platformUsername,PlatConst.level.toString(),PlatConst.playerId.toString(),PlatConst.nickName,PlatConst.zoneId,JSON.stringify(i),this.m_jzdata,function(){console.log("充值完成")}),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){window.h5sdk.reportRoleInfo(this.m_ggid,this.m_ggkey,this.m_token,PlatConst.platformUsername,PlatConst.platformUid.toString(),PlatConst.zoneId.toString(),PlatConst.level.toString(),PlatConst.playerId.toString(),PlatConst.nickName,this.m_jzdata,function(t){console.log(t)},function(t){alert(JSON.stringify(t))})},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(JzH5Platform.prototype,"JzH5Platform",["Platform"]);var MoLePlatform=function(){function t(){this.m_httpServerUrl2="https://h5.373yx.com/sdk/SdkSendData",this.m_token=""}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return window.Hyh5sdk.login(function(t){if(t.data&&t.data.token){this.m_token=t.data.token;t.data.token;PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"501",type:"login",token:t.data.token}),PlatConst.channelId=501,LoginManager.runGame()}else console.log("错误码："+t.code)}),[2]})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){window.Hyh5sdk.share(function(t){0===t.code?console.log("分享成功"):console.log("分享失败："+t.data.msg)})},t.prototype.loginGame=function(t,e,n,o){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var n,r,i,a;return __generator(this,function(s){return n="rolename="+PlatConst.nickName+"~sid="+PlatConst.zoneId.toString()+"~productid="+e.toString(),r=o,i=new md5,a={channel_id:"501",amount:r,callbackinfo:n,cp_order_id:t.toString(),role_id:PlatConst.playerId.toString(),role_name:PlatConst.nickName,user_id:PlatConst.platformUid.toString(),type:"getpay"},Mini.HttpClient.get(function(t){window.Hyh5sdk.pay(JSON.parse(t),function(t){0!==t.code?console.log("充值失败 :"+t.code):console.log("充值成功")})},this,"code=2&jstr="+JSON.stringify(a),this.m_httpServerUrl2),[2]})})},t.prototype.reportRegister=function(){var t={channel_id:"501",server_id:PlatConst.zoneId.toString(),role_id:PlatConst.playerId.toString(),role_level:PlatConst.level.toString(),role_name:PlatConst.nickName,token:PlatConst.token,user_id:PlatConst.platformUid.toString(),type:"sendrole"};Mini.HttpClient.get(function(){},this,"code=1&jstr="+JSON.stringify(t),this.m_httpServerUrl2)},t.prototype.reportLogin=function(){},t.prototype.reportData=function(t){},t.prototype.WXattention=function(){window.Hyh5sdk.subscribe(function(t){0===t.code?console.log("关注成功"):console.log("关注失败："+t.data.msg)})},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(MoLePlatform.prototype,"MoLePlatform",["Platform"]);var MzywAllApkPlatform=function(){function t(){this.m_httpServerUrl="https://h5.373yx.com/sdk/SdkSendData",this.isClickLogin=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.initPlatform=function(){egret.ExternalInterface.addCallback("sendToJS",function(t){console.log("message form native : "+t);var e=JSON.parse(t);"login"==e.type&&(PlatConst.platformUid=e.userId,PlatConst.platformUsername=e.username,PlatConst.token=e.sign,PlatConst.timestamp=e.timestamp,PlatConst.channelId=506,this.isClickLogin&&this.login())});var t={type:"init"};egret.ExternalInterface.call("sendToNative",JSON.stringify(t))},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return""==PlatConst.platformUid?(t={type:"init"},egret.ExternalInterface.call("sendToNative",JSON.stringify(t)),this.isClickLogin=!0,[2]):(this.isClickLogin=!1,PlatConst.platformUsername="",PlatConst.token=JSON.stringify({username:"",uid:"",qyChannelId:"506",type:"login",token:PlatConst.platformUid.toString()}),PlatConst.channelId=506,LoginManager.runGame(),[2])})})},t.prototype.loginCallback=function(t,e){var n=JSON.parse(e);PlatConst.platformUid=n.uid},t.prototype.showShareMenu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){},t.prototype.pay=function(t,e,n,o){return __awaiter(this,void 0,void 0,function(){var e,r,i,a,s;return __generator(this,function(l){return e=o,r=0,i=n,a=n,s={role_id:PlatConst.playerId.toString(),palyerName:PlatConst.nickName,serverName:PlatConst.zoneName,roleLevel:PlatConst.level,serverId:PlatConst.zoneId.toString(),cpOderId:t.toString(),ratio:10,cp_verify_host:"",goods:a,money:e,type:"pay"},egret.ExternalInterface.call("sendToNative",JSON.stringify(s)),console.log("---测试onClickbuy:"+JSON.stringify(s)),[2]})})},t.prototype.reportRegister=function(){platform.reportData(ReportType.createRole)},t.prototype.reportLogin=function(){platform.reportData(ReportType.enterServer)},t.prototype.reportData=function(t){var e={id:t,roleId:PlatConst.playerId.toString(),roleName:PlatConst.nickName,roleLevel:PlatConst.level.toString(),ServerId:PlatConst.zoneId.toString(),ServerName:PlatConst.zoneName,RoleVipLv:PlatConst.vipLevel.toString(),user_id:PlatConst.platformUid.toString(),game_id:"1207",type:t};egret.ExternalInterface.call("sendToNative",JSON.stringify(e)),console.log(t,"  ---测试onClickbuy:"+JSON.stringify(e))},t.prototype.WXattention=function(){},t.prototype.isHidePayFunc=function(){return!1},t.prototype.isMsgCheckFunc=function(t,e,n){e.call(n,!0)},t}();__reflect(MzywAllApkPlatform.prototype,"MzywAllApkPlatform",["Platform"]);var TOUCH_SCALE_XY=.95,TOUCH_SCALE_DEALY=90,CONTENT_HEIGHT=750,CONTENT_WIDTH=1334,DEFAULT_VIEW_W=750,DEFAULT_VIEW_H=674,ServerList=function(){function t(){}return t.initServerList=function(t,e){this.m_pCall=t,this.m_pCallObj=e,this.load()},t.load=function(){var t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.TEXT,t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this);var e=new egret.URLRequest(GameConfig.getServerListUrl());e.requestHeaders=[new egret.URLRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8")],t.load(e)},t.onLoadError=function(t){LoginManager.showConfirmPop("服务器列表下载失败，请检查网络情况！",this.load,this)},t.onLoadComplete=function(t){this.SERVER_INIT_SUCCESS=!0;var e=t.target,n=e.data,o=JSON.parse(n);this.m_pDatas=[];for(var r=0;r<o.length;r++)this.m_pDatas.push(o[r]);console.log("获取服务器列表:",this.m_pDatas),this.m_pCall&&this.m_pCall.call(this.m_pCallObj),this.m_pCall=null,this.m_pCallObj=null},t.getDataByIndex=function(t){for(var e=0,n=this.m_pDatas;e<n.length;e++){var o=n[e];if(o.id==t)return o}return this.m_pDatas[this.m_pDatas.length-1]},t.getDatas=function(){return this.m_pDatas},t.getRecommendServerIndex=function(){for(var t=0,e=this.m_pDatas;t<e.length;t++){var n=e[t];if(1==n.rec)return n.id}return 0},t.SERVER_INIT_SUCCESS=!1,t}();__reflect(ServerList.prototype,"ServerList");var Mini;!function(t){var e=function(){function t(){}return t.prototype.paramsBuilder=function(t){var e=[];if("object"==typeof t){var n;for(n in t)e.push(n+"="+t[n]);return e.join("&")}return"string"==typeof t?t:""},t.prototype.send=function(t,e,n,o,r){this.returnFunc=e,this.target=n,this.request=new egret.HttpRequest;var i=this.request,a=this.paramsBuilder(o),s=r;t==egret.HttpMethod.POST?i.setRequestHeader("Content-Type","application/json"):(s+="?"+a,a=""),console.log(s),i.responseType=egret.HttpResponseType.TEXT,i.open(s,t),i.send(o),i.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},t.prototype.onGetComplete=function(t){var e=t.currentTarget,n="JSON"==this.responseType?JSON.parse(e.response):e.response;null!=this.returnFunc&&this.returnFunc.call(this.target,n),this.destory()},t.prototype.onGetIOError=function(t){console.log("get error : "+t),this.destory()},t.prototype.onGetProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},t.prototype.destory=function(){var t=this.request;t.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),t.removeEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),this.returnFunc=null,this.request=null},t.get=function(e,n,o,r){var i=new t;i.send(egret.HttpMethod.GET,e,n,o,r)},t.post=function(e,n,o,r){var i=new t;i.send(egret.HttpMethod.POST,e,n,o,r)},t}();t.HttpClient=e,__reflect(e.prototype,"Mini.HttpClient")}(Mini||(Mini={})),PlatConst.platform=Number($Platform),window.platform||(PlatConst.platform==PlatEnum.TS_WEIDUAN?window.platform=new TSWeiduanPlatform:PlatConst.platform==PlatEnum.MOLE_WEB?window.platform=new MoLePlatform:PlatConst.platform==PlatEnum.QUNHEI_WEB?window.platform=new QunHeiPlatform:PlatConst.platform==PlatEnum.MZYW_WEB?window.platform=new MzywPlatform:PlatConst.platform==PlatEnum.DDT_WEB?window.platform=new DdtPlatform:PlatConst.platform==PlatEnum.DDT_WE_CHAT?window.platform=new DdtWxPlatform:PlatConst.platform==PlatEnum.MZYW_ALL_APK?window.platform=new MzywAllApkPlatform:PlatConst.platform==PlatEnum.ZSY_WEB?window.platform=new ZsyPlatform:PlatConst.platform==PlatEnum.ZSY_WE_CHAT?window.platform=new ZsyWxPlatform:PlatConst.platform==PlatEnum.MZYW_IOS?window.platform=new MzywIosPlatform:PlatConst.platform==PlatEnum.JZ_APK?window.platform=new JzApkPlatform:PlatConst.platform==PlatEnum.JZ_APK2?window.platform=new JzApk2Platform:PlatConst.platform==PlatEnum.JZ_APK3?window.platform=new JzApk3Platform:PlatConst.platform==PlatEnum.JZ_APK4?window.platform=new JzApk4Platform:PlatConst.platform==PlatEnum.JZ_H5?window.platform=new JzH5Platform:PlatConst.platform==PlatEnum.HY_APK?window.platform=new HyApkPlatform:window.platform=new DebugPlatform,window.platform.initPlatform());var Mini;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.textureList=[],e.curFrame=0,e._delay=125,e.loop=0,e}return __extends(e,t),e.prototype.onDestroy=function(){this.stopTimer(),this.textureList=null},e.prototype.initByBitmap=function(t,e,o,r,i,a,s){this.textureList=n.cutTile(t,e,o,r,i,a,s),this.textureList&&this.textureList.length>0&&(this.texture=this.textureList[0],this.curFrame=0,this.totalFrame=this.textureList.length)},e.prototype.play=function(t){void 0===t&&(t=0),this.loop=t,this.startTimer()},e.prototype.stop=function(){this.stopTimer()},e.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=0),t<=this.totalFrame?(this.loop=e,this.curFrame=t,this.texture=this.textureList[t-1],this.startTimer()):console.error("BitmapMovie >> frame超出范围")},e.prototype.gotoAndStop=function(t){t<=this.totalFrame?(this.stopTimer(),this.curFrame=t,this.texture=this.textureList[t-1]):console.error("BitmapMovie >> frame超出范围")},e.prototype.startTimer=function(){this.timer||(this.timer=new egret.Timer(this.delay)),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this),this.timer.reset(),this.timer.start()},e.prototype.onTimerHandler=function(){this.curFrame++,this.curFrame<=this.totalFrame?this.texture=this.textureList[this.curFrame-1]:(this.loop--,this.dispatchEvent(new egret.Event(egret.Event.LOOP_COMPLETE)),this.loop>0?(this.curFrame=1,this.texture=this.textureList[this.curFrame-1]):(this.stopTimer(),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))))},e.prototype.stopTimer=function(){this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this),this.timer.stop())},Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this.timer&&(this.timer.delay=t)},enumerable:!0,configurable:!0}),e}(eui.Image);t.BitmapMovie=e,__reflect(e.prototype,"Mini.BitmapMovie");var n=function(){function t(){}return t.cutTile=function(t,e,n,o,r,i,a){for(var s=new egret.Rectangle,l=0,c=[],p=0;e>p;p++)for(var u=0;n>u;u++){if(!(p*n+u>=o&&r>=l))return c;var d=new egret.RenderTexture;if(s.x=u*i,s.y=p*a,s.width=i,s.height=a,0==d.drawToTexture(t,s))return console.error("CutImgTool >> cut error"),null;c.push(d),l++}return c},t}();__reflect(n.prototype,"CutImgTool")}(Mini||(Mini={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function o(o){e.call(n,o,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?o(r):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,o){function r(t){e.call(o,t)}function i(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(o,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ClientConfig=function(){function t(){}return t.setup=function(t,e){this.m_pCall=t,this.m_pCallObj=e,this.m_loader=new egret.URLLoader,this.m_loader.dataFormat=egret.URLLoaderDataFormat.TEXT,this.m_loader.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.load(GameConfig.getClientConfigUrl())},t.load=function(t){var e=new egret.URLRequest(t);this.m_loader.load(e)},t.onLoadComplete=function(t){var e=t.target,n=e.data,o=JSON.parse(n);GameConfig.version=o.version,this.m_loader.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.m_pCall&&(this.m_pCall.call(this.m_pCallObj),this.m_pCall=null,this.m_pCallObj=null)},t}();__reflect(ClientConfig.prototype,"ClientConfig"),window.Mini=Mini,window.LoginConst=LoginConst,window.md5=md5,window.ClientConfig=ClientConfig,window.GameConfig=GameConfig,window.BattleQualityEnum=BattleQualityEnum,window.LocalData=LocalData,window.PlatConst=PlatConst,window.IPSeEnum=IPSeEnum,window.LoginManager=LoginManager,window.ReportType=ReportType;var Mini;!function(t){var e=function(t){function e(e,n,o){var r=t.call(this)||this;return r.m_callbackConfirm=n,r.m_thisArg=o,r.m_sTips=e,r.width=GameConfig.curWidth(),r.height=GameConfig.curHeight(),r}return __extends(e,t),e.prototype.onDestroy=function(){this.m_callbackConfirm=null,this.m_thisArg=null,this.m_sTips=null,t.prototype.onDestroy.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.setSize(560,360),this.setTitle("提 示");var e=new eui.Label(this.m_sTips);e.size=24,e.width=450,e.textAlign="center",e.textColor=9079454,e.verticalCenter=-52,this.m_pRoot.addChild(e)},e.prototype.onConfirmClick=function(){var t=this.m_callbackConfirm,e=this.m_thisArg;this.onDestroy(),t&&e&&t.call(e)},e.instance=null,e}(t.CMaskWnd);t.ConfirmPop=e,__reflect(e.prototype,"Mini.ConfirmPop")}(Mini||(Mini={}));var Mini;!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n.m_sNotice=e,n}return __extends(e,t),e.prototype.onDestroy=function(){this.m_loader&&(this.m_loader.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.m_loader=null),t.prototype.onDestroy.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.setTitle("公 告"),this.setSize(1044,600);var e=new eui.Scroller;e.width=986,e.height=468,e.y=91,e.horizontalCenter=0,this.m_pRoot.addChild(e);var n=new eui.Group;if(e.addChild(n),e.viewport=n,this.m_labDes=new eui.Label,this.m_labDes.size=26,this.m_labDes.width=986,this.m_labDes.textColor=11192319,this.m_labDes.lineSpacing=10,this.m_labDes.touchEnabled=!1,n.addChild(this.m_labDes),this.m_sNotice)this.m_labDes.textFlow=(new egret.HtmlTextParser).parser(this.m_sNotice);else{this.m_loader=new egret.URLLoader,this.m_loader.dataFormat=egret.URLLoaderDataFormat.TEXT,this.m_loader.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this);var o=new egret.URLRequest(GameConfig.getNoticeUrl());this.m_loader.load(o)}},e.prototype.onLoadComplete=function(t){var e=t.target,n=e.data;this.m_labDes.textFlow=(new egret.HtmlTextParser).parser(n)},e}(t.CMaskWnd);t.LoginNoticeWnd=e,__reflect(e.prototype,"Mini.LoginNoticeWnd")}(Mini||(Mini={}));var Mini;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.width=GameConfig.curWidth(),e.height=GameConfig.curHeight(),e}return __extends(e,t),e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.setTitle("选择服务器"),this.setSize(847,684),this.createStatusIcon(458,1),this.createStatusIcon(581,2),this.createStatusIcon(694,3),this.m_tList=[];var e=ServerList.getDatas();e.sort(function(t,e){return t.rec?-1:e.rec?1:t.id-e.id}),this.createList("推荐服务器",e),this.initEvent()},e.prototype.createStatusIcon=function(t,e){var n=LoginConst.createLabel("",t+54,75,24,16777215);n.textFlow=(new egret.HtmlTextParser).parser(LoginConst.getSerStateLab(e)),this.m_pRoot.addChild(n);var o=LoginConst.createImage("login_status_"+e+".png",t+10,70);this.m_pRoot.addChild(o)},e.prototype.createList=function(t,e){var o=LoginConst.createImage("line_1006.png",0,150,847);this.m_pRoot.addChild(o);var r=LoginConst.createImage("line_011.png",159,125);this.m_pRoot.addChild(r);var i=LoginConst.createImage("line_011.png",690,125);i.scaleX=-1,this.m_pRoot.addChild(i);var a=LoginConst.createLabel(t,0,115,26,11253713);a.horizontalCenter=0,this.m_pRoot.addChild(a);var s=new eui.Scroller;s.x=16,s.y=155,s.width=817,s.height=520,this.m_pRoot.addChild(s);var l=new eui.List;l.dataProvider=new eui.ArrayCollection(e),l.itemRenderer=n;var c=new eui.TileLayout;c.horizontalGap=22,c.paddingLeft=42.5,l.layout=c,s.addChild(l),s.viewport=l,this.m_tList.push(l)},e.prototype.initEvent=function(){for(var t=0;t<this.m_tList.length;t++)this.m_tList[t].addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemSelected,this)},e.prototype.removeEvent=function(){for(var t=0;t<this.m_tList.length;t++)this.m_tList[t].removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemSelected,this)},e.prototype.onItemSelected=function(t){var e=t.item;e&&(LoginManager.changeServerSel(e.id),this.onDestroy())},e.NAME="LoginServerList",e}(t.CMaskWnd);t.LoginServerList=e,__reflect(e.prototype,"Mini.LoginServerList");var n=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=LoginConst.createImage("zyt_23.png");this.addChild(e),this.m_imgState=LoginConst.createImage("",295,29),this.addChild(this.m_imgState),this.m_labName=LoginConst.createLabel("",60,33,24,16777215),this.addChild(this.m_labName),this.m_newImg=LoginConst.createImage("zyt_40.png",-10,-8),this.addChild(this.m_newImg),this.touchChildren=!1},e.prototype.dataChanged=function(){if(this.m_tData=this.data,this.m_tData){this.m_labName.textFlow=(new egret.HtmlTextParser).parser(this.m_tData.name+" "+LoginConst.getSerStateLab(this.m_tData.status));var t=this.m_tData.status;4==t&&(t=2),this.m_imgState.source=LoginConst.getResUrl("login_status_"+t+".png"),4==this.m_tData.status?this.m_newImg.visible=!0:this.m_newImg.visible=!1}},e}(eui.ItemRenderer);__reflect(n.prototype,"ServerItemRender")}(Mini||(Mini={}));var Mini;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.width=GameConfig.curWidth(),t.height=GameConfig.curHeight(),t}return __extends(n,e),n.prototype.onDestroy=function(){if(this.removeEvent(),egret.Tween.removeTweens(this.m_imgPro),this.m_nTimeOut&&egret.clearTimeout(this.m_nTimeOut),this.m_btnMc&&(this.m_btnMc.onDestroy(),this.m_btnMc=null),this.m_tipsLabs){for(var t=0;t<this.m_tipsLabs.length;t++)egret.Tween.removeTweens(this.m_tipsLabs[t]);this.m_tipsLabs=null}LoginManager.loginScene=null},n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_tipsLabs=[];var t=LocalData.getData("isFirstLaunch","0");LocalData.setData("isFirstLaunch","1");var n=(new Date).getTime();"0"==t?(window.ta.track("first_launch_game",{first_launch_time:(n-window.$Htmltimestamp).toString()}),console.log("###################################################################"),console.log("游戏首次启动耗时 ： ",n-window.$Htmltimestamp,"毫秒")):(window.ta.track("launch_game",{launch_time:(n-window.$Htmltimestamp).toString()}),console.log("###################################################################"),console.log("游戏非首次启动耗时 ： ",n-window.$Htmltimestamp,"毫秒")),this.createView(),this.m_labVersion.text="当前版本："+GameConfig.version,this.startLogin(),this.initEvent(),platform.showShareMenu()},n.prototype.startLogin=function(){var t=this;ServerList.initServerList(function(){t.m_pServer.visible=!0;var e=ServerList.getRecommendServerIndex(),n=LocalData.getData("IP_PORT",e+""),o=Number(n);t.changeServerSel(o)},this),GameConfig.MusicIsPlay&&this.playLoginSound(),LoginManager.startGame()},n.prototype.createView=function(){this.m_imgBg=LoginConst.createImage("login_bg.jpg"),this.m_imgBg.horizontalCenter=0,this.m_imgBg.verticalCenter=0;var t=Math.max(egret.MainContext.instance.stage.stageWidth/1334,egret.MainContext.instance.stage.stageHeight/750);this.m_imgBg.scaleX=t,this.m_imgBg.scaleY=t,this.addChild(this.m_imgBg);var e=LoginConst.createImage("login_lb_qysg.png");e.right=8,e.top=15,this.createAcount(),this.createServer(),this.createProcess(),this.m_labVersion=LoginConst.createLabel("",0,0,20,15329766),this.m_labVersion.bottom=30,this.m_labVersion.right=25,this.addChild(this.m_labVersion),this.m_btnEnter=new eui.Group,this.m_btnEnter.horizontalCenter=0,this.m_btnEnter.bottom=61,this.m_btnEnter.width=308,this.m_btnEnter.height=114,this.m_btnEnter.anchorOffsetX=159,this.m_btnEnter.anchorOffsetY=57,this.addChild(this.m_btnEnter);var n=LoginConst.createImage("login_btn.png");this.m_btnEnter.addChild(n),this.createBtnEff(),PlatConst.isHideAccount()?this.m_pAcount.visible=!1:(this.m_labDebug=LoginConst.createLabel("调试",0,0,30,16777215,!0),this.m_labDebug.right=25,this.m_labDebug.bottom=61,this.addChild(this.m_labDebug),LoginConst.addTouchEvent(this.m_labDebug,this.onDebug,this))},n.prototype.onDebug=function(){if(LoginManager.isCodeInit){var t=new com_main.TestSettingView;com_main.UpManager.popView(t)}},n.prototype.createAcount=function(){this.m_pAcount=new eui.Group,this.m_pAcount.horizontalCenter=0,this.m_pAcount.bottom=245,this.addChild(this.m_pAcount);var t=LoginConst.createImage("login_border_1005.png",0,0,414,46);t.horizontalCenter=0,this.m_pAcount.addChild(t);var e=LoginConst.createLabel("账号",146,7,30,16777215);this.m_pAcount.addChild(e),GameConfig.account=LocalData.getData("account"),this.m_editLabel=new eui.EditableText,this.m_editLabel.size=30,this.m_editLabel.text=GameConfig.account,this.m_editLabel.textColor=9079454,this.m_editLabel.x=233,this.m_editLabel.y=7,this.m_editLabel.width=300,this.m_pAcount.addChild(this.m_editLabel)},n.prototype.createServer=function(){this.m_pServer=new eui.Group,this.m_pServer.horizontalCenter=0,this.m_pServer.bottom=198,this.addChild(this.m_pServer),this.m_pServer.visible=!1;var t=LoginConst.createImage("login_border_1005.png",0,0,512,38);t.horizontalCenter=0,this.m_pServer.addChild(t),this.m_labServer=LoginConst.createLabel("",123,7,22,16777215),this.m_pServer.addChild(this.m_labServer);var e=LoginConst.createLabel("点击选服",320,7,22,15189874);
this.m_pServer.addChild(e)},n.prototype.createProcess=function(){var t=LoginConst.createImage("border_1019.png",null,null,this.width,122);t.bottom=0,this.addChild(t),this.m_pPro=new eui.Group,this.m_pPro.width=this.width,this.m_pPro.bottom=0,this.addChild(this.m_pPro),this.m_pPro.visible=!1;var e=LoginConst.createImage("login_proBg_003.png",null,null,this.width);e.height=9,e.bottom=0,this.m_pPro.addChild(e),this.m_imgPro=LoginConst.createImage("login_pro_001.png",null,null,0),this.m_imgPro.bottom=0,this.m_imgPro.width=0,this.m_pPro.addChild(this.m_imgPro),this.m_labPro=LoginConst.createLabel("",0,0,18,9079454),this.m_labPro.horizontalCenter=0,this.m_labPro.bottom=20,this.m_pPro.addChild(this.m_labPro)},n.prototype.playLoginSound=function(){this.m_soundBg=new egret.Sound,this.m_soundBg.addEventListener(egret.Event.COMPLETE,this.onSoundComp,this),this.m_soundBg.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSoundError,this),this.m_soundBg.load(LoginConst.getResUrl("denglujiemian.mp3"))},n.prototype.createBtnEff=function(){var e=this,n=new egret.ImageLoader;n.crossOrigin="anonymous",n.once(egret.Event.COMPLETE,function(){if(e.m_btnEnter&&n.data){var o=new egret.Texture;o._setBitmapData(n.data);var r=new egret.Bitmap(o);e.m_btnMc=new t.BitmapMovie,e.m_btnMc.initByBitmap(r,7,1,0,7,318,140),e.m_btnMc.play(9999),e.m_btnMc.x=-5,e.m_btnMc.y=-15,e.m_btnMc.touchEnabled=!1,e.m_btnEnter.addChild(e.m_btnMc)}},this),n.load(LoginConst.getResUrl("btnEffect.png"))},n.prototype.initEvent=function(){this.m_pServer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onServerHandler,this),LoginConst.addTouchEvent(this.m_btnEnter,this.onBtnEnter,this),this.m_editLabel.addEventListener(egret.Event.CHANGE,this.onAccountChange,this)},n.prototype.removeEvent=function(){this.m_pServer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onServerHandler,this),LoginConst.removeTouchEvent(this.m_btnEnter,this.onBtnEnter,this),this.m_editLabel.removeEventListener(egret.Event.CHANGE,this.onAccountChange,this),this.m_labDebug&&LoginConst.removeTouchEvent(this.m_labDebug,this.onDebug,this),this.m_soundBg&&(this.m_soundBg.removeEventListener(egret.Event.COMPLETE,this.onSoundComp,this),this.m_soundBg.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSoundError,this),this.m_soundBg=null,this.m_channelBg&&(this.m_channelBg.stop(),this.m_channelBg=null))},n.prototype.onAccountChange=function(t){var e=t.target,n=this.trim(e.text);n=this.filterStr(n),""!=e.text&&(e.text=e.text,GameConfig.account=e.text,LocalData.setData("account",GameConfig.account))},n.prototype.onBtnEnter=function(){window.ta.track("novice_guide",{step:1e4+""});var t=Number(LocalData.getData("IP_PORT")),e=ServerList.getDataByIndex(t),n=Number(e.status);3==n?this.showNoticeWnd(e.notice||"停服维护"):this.m_pAcount.visible&&""==this.m_editLabel.text?this.m_editLabel.prompt="请输入账号":this.login()},n.prototype.login=function(){var t=this;return LoginManager.isCodeInit?this.m_bInEnter?void this.showTips("操作频繁 请稍后"):(this.m_bInEnter=!0,this.m_nTimeOut=egret.setTimeout(function(){t.m_bInEnter=!1},this,2e3),void platform.login()):void this.showTips("初始化中 请稍后")},n.prototype.onServerHandler=function(){this.showLoginServerList()},n.prototype.onSoundComp=function(){this.m_channelBg=this.m_soundBg.play(0,0)},n.prototype.onSoundError=function(){console.error("loaded error!",event)},n.prototype.setProcess=function(t,e){this.m_pPro.visible=!0,this.m_labPro.text=t+" "+Math.floor(e)+"%",egret.Tween.removeTweens(this.m_imgPro);var n=egret.Tween.get(this.m_imgPro);n.to({width:this.width*(e/100)},100)},n.prototype.hideProcess=function(){egret.Tween.removeTweens(this.m_imgPro),this.m_imgPro.width=0,this.m_pPro.visible=!1},n.prototype.showTips=function(t){var e=this,n=LoginConst.createLabel(t,.5*this.width,.5*this.height,30,16777215);n.horizontalCenter=0,n.alpha=.5;var o=egret.Tween.get(n);o.to({y:n.y-100,alpha:1},500,egret.Ease.cubicOut),o.to({alpha:0},300),o.call(function(){if(n&&n.parent){for(var t=0;t<e.m_tipsLabs.length;t++)if(e.m_tipsLabs[t].hashCode==n.hashCode){e.m_tipsLabs.splice(t,1);break}n.parent.removeChild(n),n=null}},this),this.m_tipsLabs.push(n),this.addChildAt(n,999)},n.prototype.changeServerSel=function(t){LocalData.setData("IP_PORT",t);var e=ServerList.getDataByIndex(t);4==e.status?this.m_labServer.textFlow=(new egret.HtmlTextParser).parser("<font color=#90FC5B>新服 </font>"+e.name):this.m_labServer.text=e.name,PlatConst.zoneId=e.id,PlatConst.zoneName=e.name,GameConfig.server_ip=e.ip,GameConfig.server_port=e.port},n.prototype.showConfirmPop=function(e,n,o){var r=new t.ConfirmPop(e,n,o);this.addChildAt(r,99)},n.prototype.showLoginServerList=function(){if(!ServerList.SERVER_INIT_SUCCESS)return void this.showTips("服务器列表未下载");var e=new t.LoginServerList;this.addChild(e)},n.prototype.showNoticeWnd=function(e){var n=new t.LoginNoticeWnd(e);this.addChild(n)},n.prototype.trim=function(t){var e;return e=t.replace(/(^\s+)|(\s+$)/g,""),e=e.replace(/\s/g,"")},n.prototype.filterStr=function(t){for(var e=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；�：”“'。，、？%+]"),n="",o=0;o<t.length;o++)n+=t.substr(o,1).replace(e,"");return n},n.prototype.onRefresh=function(){},n}(eui.Component);t.LoginScene=e,__reflect(e.prototype,"Mini.LoginScene")}(Mini||(Mini={}));